<div id='controls'>
  <div id="main_controls">
    <%= link_to t('actions.edit'), practice_path(@practice), :class => 'medium blue awesome' %>
    <%= link_to_function t('actions.config'), "$('#play_config_dialog').dialog('open');", :class => 'medium blue awesome' %>
  </div>
  <div id="play_controls">
    <%= link_to content_tag(:span, t('actions.previous'), :id => 'prev'), "#", :class => "small orange awesome" %>
    <%= link_to_function t('actions.pause'), "$('#countdown').countdown('pause');", :class => 'small orange awesome' %>
    <div id="countdown"></div>
    <%= link_to_function t('actions.play'), "$('#countdown').countdown('resume');", :class => 'small orange awesome' %>
    <%= link_to content_tag(:span, t('actions.next'), :id => 'next'), "#" , :class => 'small orange awesome' %>
  </div>
</div>
<div id='slideshow_practice_techniques' style='width: auto;'>
  <% @practice.practice_techniques.each do |practice_technique| %>
    <%= render :partial => 'play_practice_technique', :locals => {:practice_technique => practice_technique} %>
    <% if practice_technique.compensate? %>
      <%= render :partial => 'play_practice_technique', :locals => {:practice_technique => practice_technique, :compensation => true} %>
    <% end %>
  <% end %>
</div>

<div id='play_config_dialog' style="display:none"></div>

<%= javascript_tag do %>
  $('#play_config_dialog').dialog({autoOpen: false});
  $('#slideshow_practice_techniques').cycle({
    prev:    '#prev',
    next:    '#next',
    timeout: 0,
    before: function(currSlideElement, nextSlideElement, options, forwardFlag) {
      minutes = parseInt($(nextSlideElement).attr('minutes')) || 0;
      seconds = parseInt($(nextSlideElement).attr('seconds')) || 1;
      Practices.resetCountdown(minutes, seconds);
    },
    fit: 1,
    width: '99.9%'
  });
<% end %>