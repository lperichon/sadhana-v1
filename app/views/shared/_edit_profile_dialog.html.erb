<div id='edit_profile_dialog' style='display:none' title='<%= t('shared.edit_profile_dialog.title') %>'>
  <%= form_for(current_user, :url => registration_path(:user), :html => { :method => :put }) do |f| %>
    <div class="field">
      <%= f.label :email %><br/>
      <%= f.text_field :email %>
    </div>
    <div class="field">
      <%= f.label :password %> <%= field_help t('shared.edit_profile_dialog.password_help') %><br/>
      <%= f.password_field :password, :autocomplete => 'off' %>
    </div>
    <div class="field">
      <%= f.label :password_confirmation %><br/>
      <%= f.password_field :password_confirmation, :autocomplete => 'off' %>
    </div>
    <div class='field'>
      <%= f.label :locale %><br/>
      <%= select :user, :locale, I18n.backend.available_locales.collect {|l| [I18n.t('this_file_language', :locale => l), l.to_s]}, {:selected => current_user.locale} %>
    </div>
    <div class="field">
      <%= f.label :current_password %> <%= field_help t('shared.edit_profile_dialog.current_password_help') %><br/>
      <%= f.password_field :current_password, :autocomplete => 'off' %>
    </div>
  <% end %>
</div>

<%= javascript_tag do %>
  $('#edit_profile_dialog').dialog({autoOpen: false, modal: true, buttons: {
    '<%= t('actions.update') %>': function() {
        $('#edit_profile_dialog form').submit();
      },
    '<%= t('actions.cancel') %>': function() {
        $(this).dialog('close');
      }
    }
  });
<% end %>